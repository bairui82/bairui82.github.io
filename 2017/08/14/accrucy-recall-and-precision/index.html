<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="none"><title>accrucy recall and precision | Bairui's 技术博客</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">accrucy recall and precision</h1><a id="logo" href="/.">Bairui's 技术博客</a><p class="description">随便写写</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">accrucy recall and precision</h1><div class="post-meta">Aug 14, 2017</div><a data-disqus-identifier="2017/08/14/accrucy-recall-and-precision/" href="/2017/08/14/accrucy-recall-and-precision/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>本文将简单介绍其中几个概念。中文中这几个评价指标翻译各有不同，所以一般情况下推荐使用英文。</p>

<p>现在我先假定一个具体场景作为例子。<br><span id="more-1036"></span></p>

<blockquote>假如某个班级有男生<strong>80</strong>人,女生<strong>20</strong>人,共计<strong>100</strong>人.目标是找出所有女生.<br>现在某人挑选出<strong>50</strong>个人,其中<strong>20</strong>人是女生,另外还错误的把30个男生也当作女生挑选出来了.<br>作为评估者的你需要来评估(<strong>evaluation</strong>)下他的工作</blockquote>

<p>首先我们可以计算<strong>准确率(accuracy)</strong>,其定义是: 对于给定的测试数据集，分类器正确分类的样本数与总样本数之比。也就是损失函数是0-1损失时测试数据集上的准确率<a href="#ref_1" style="opacity: 1;">[1]</a>.</p>

<p>这样说听起来有点抽象，简单说就是，前面的场景中，实际情况是那个班级有男的和女的两类，某人(也就是定义中所说的分类器)他又把班级中的人分为男女两类。accuracy需要得到的是此君<strong>分正确的人</strong>占<strong>总人数</strong>的比例。很容易，我们可以得到:他把其中70(20女+50男)人判定正确了,而总人数是100人，所以它的accuracy就是70 %(70 / 100).</p>

<p>由准确率，我们的确可以在一些场合，从某种意义上得到一个分类器是否有效，但它并不总是能有效的评价一个分类器的工作。举个例子,google抓取了argcv 100个页面，而它索引中共有10,000,000个页面,随机抽一个页面，分类下,这是不是argcv的页面呢?如果以accuracy来判断我的工作，那我会把所有的页面都判断为”不是argcv的页面”,因为我这样效率非常高(return false,一句话),而accuracy已经到了99.999%(9,999,900/10,000,000),完爆其它很多分类器辛辛苦苦算的值,而我这个算法显然不是需求期待的,那怎么解决呢?这就是precision,recall和f1-measure出场的时间了.</p>

<p>在说precision,recall和f1-measure之前,我们需要先需要定义TP,FN,FP,TN四种分类情况.<br>按照前面例子,我们需要从一个班级中的人中寻找所有<strong>女生</strong>,如果把这个任务当成一个分类器的话,那么女生就是我们需要的,而男生不是,所以我们称女生为”正类”,而男生为”负类”.</p>

<table border="2" width="100%"><br><tbody><br><tr style="background-color: #d3d3d3;"><br><td><strong>&nbsp;</strong></td><br><td><strong>相关(Relevant),正类</strong></td><br><td><strong>无关(NonRelevant),负类</strong></td><br></tr><br><tr><br><td style="background-color: #dcdcdc;"><strong>被检索到(Retrieved)</strong></td><br><td>true positives(TP 正类判定为正类,例子中就是正确的判定”这位是女生”)</td><br><td>false positives(FP 负类判定为正类,”存伪”,例子中就是分明是男生却判断为女生,当下伪娘横行,这个错常有人犯)</td><br></tr><br><tr><br><td style="background-color: #dcdcdc;"><strong>未被检索到(Not Retrieved)</strong></td><br><td>false negatives(FN 正类判定为负类,”去真”,例子中就是,分明是女生,这哥们却判断为男生–梁山伯同学犯的错就是这个)</td><br><td>true negatives(TN 负类判定为负类,也就是一个男生被判断为男生,像我这样的纯爷们一准儿就会在此处)</td><br></tr><br></tbody><br></table>

<p>通过这张表,我们可以很容易得到这几个值:<br>TP=20<br>FP=30<br>FN=0<br>TN=50</p>

<p><strong>精确率(precision)</strong>的公式是<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-1-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-1" style="width: 5.83em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.078em; height: 0px; font-size: 114%;"><span style="position: absolute; clip: rect(1.006em 1005.08em 2.76em -999.997em); top: -2.127em; left: 0em;"><span class="mrow" id="MathJax-Span-2"><span class="mi" id="MathJax-Span-3" style="font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.128em;"></span></span><span class="mo" id="MathJax-Span-4" style="font-family: MathJax_Main; padding-left: 0.254em;">=</span><span class="mfrac" id="MathJax-Span-5" style="padding-left: 0.254em;"><span style="display: inline-block; position: relative; width: 2.76em; height: 0px; margin-right: 0.128em; margin-left: 0.128em;"><span style="position: absolute; clip: rect(3.324em 1001.01em 4.201em -999.997em); top: -4.445em; left: 50%; margin-left: -0.498em;"><span class="mrow" id="MathJax-Span-6"><span class="mi" id="MathJax-Span-7" style="font-size: 70.7%; font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-8" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.324em 1002.63em 4.264em -999.997em); top: -3.568em; left: 50%; margin-left: -1.313em;"><span class="mrow" id="MathJax-Span-9"><span class="mi" id="MathJax-Span-10" style="font-size: 70.7%; font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-11" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mo" id="MathJax-Span-12" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mi" id="MathJax-Span-13" style="font-size: 70.7%; font-family: MathJax_Math-italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-14" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.818em 1002.76em 1.256em -999.997em); top: -1.313em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.76em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.068em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.133em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.568em; border-left: 0px solid; width: 0px; height: 1.718em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-1">P = \frac{TP}{TP+FP}</script>,它计算的是所有”正确被检索的item(TP)”占所有”实际被检索到的(TP+FP)”的比例.</p>

<p>在例子中就是希望知道此君得到的所有人中,正确的人(也就是女生)占有的比例.所以其precision也就是40%(20女生/(20女生+30误判为女生的男生)).</p>

<p><strong>召回率(recall)</strong>的公式是<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-2-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-15" style="width: 5.956em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.204em; height: 0px; font-size: 114%;"><span style="position: absolute; clip: rect(1.006em 1005.2em 2.76em -999.997em); top: -2.127em; left: 0em;"><span class="mrow" id="MathJax-Span-16"><span class="mi" id="MathJax-Span-17" style="font-family: MathJax_Math-italic;">R</span><span class="mo" id="MathJax-Span-18" style="font-family: MathJax_Main; padding-left: 0.254em;">=</span><span class="mfrac" id="MathJax-Span-19" style="padding-left: 0.254em;"><span style="display: inline-block; position: relative; width: 2.885em; height: 0px; margin-right: 0.128em; margin-left: 0.128em;"><span style="position: absolute; clip: rect(3.324em 1001.01em 4.201em -999.997em); top: -4.445em; left: 50%; margin-left: -0.498em;"><span class="mrow" id="MathJax-Span-20"><span class="mi" id="MathJax-Span-21" style="font-size: 70.7%; font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-22" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.324em 1002.76em 4.264em -999.997em); top: -3.568em; left: 50%; margin-left: -1.375em;"><span class="mrow" id="MathJax-Span-23"><span class="mi" id="MathJax-Span-24" style="font-size: 70.7%; font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-25" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mo" id="MathJax-Span-26" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mi" id="MathJax-Span-27" style="font-size: 70.7%; font-family: MathJax_Math-italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-28" style="font-size: 70.7%; font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.818em 1002.88em 1.256em -999.997em); top: -1.313em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.885em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.068em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.133em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.568em; border-left: 0px solid; width: 0px; height: 1.718em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-2">R = \frac{TP}{TP+FN}</script>,它计算的是所有”正确被检索的item(TP)”占所有”应该检索到的item(TP+FN)”的比例。</p>

<p>在例子中就是希望知道此君得到的女生占本班中所有女生的比例,所以其recall也就是100%(20女生/(20女生+ 0 误判为男生的女生))</p>

<p>F1值就是精确值和召回率的调和均值,也就是</p>

<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-3-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-29" style="width: 6.206em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.454em; height: 0px; font-size: 114%;"><span style="position: absolute; clip: rect(1.068em 1005.45em 2.823em -999.997em); top: -2.127em; left: 0em;"><span class="mrow" id="MathJax-Span-30"><span class="mfrac" id="MathJax-Span-31"><span style="display: inline-block; position: relative; width: 0.88em; height: 0px; margin-right: 0.128em; margin-left: 0.128em;"><span style="position: absolute; clip: rect(3.324em 1000.32em 4.201em -999.997em); top: -4.445em; left: 50%; margin-left: -0.185em;"><span class="mn" id="MathJax-Span-32" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.324em 1000.75em 4.326em -999.997em); top: -3.568em; left: 50%; margin-left: -0.373em;"><span class="msubsup" id="MathJax-Span-33"><span style="display: inline-block; position: relative; width: 0.755em; height: 0px;"><span style="position: absolute; clip: rect(3.324em 1000.5em 4.201em -999.997em); top: -4.007em; left: 0em;"><span class="mi" id="MathJax-Span-34" style="font-size: 70.7%; font-family: MathJax_Math-italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.882em; left: 0.442em;"><span class="mn" id="MathJax-Span-35" style="font-size: 50.1%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.818em 1000.88em 1.256em -999.997em); top: -1.313em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.88em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.068em;"></span></span></span></span><span class="mo" id="MathJax-Span-36" style="font-family: MathJax_Main; padding-left: 0.254em;">=</span><span class="mfrac" id="MathJax-Span-37" style="padding-left: 0.254em;"><span style="display: inline-block; position: relative; width: 0.63em; height: 0px; margin-right: 0.128em; margin-left: 0.128em;"><span style="position: absolute; clip: rect(3.324em 1000.32em 4.201em -999.997em); top: -4.445em; left: 50%; margin-left: -0.185em;"><span class="mn" id="MathJax-Span-38" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.324em 1000.5em 4.201em -999.997em); top: -3.568em; left: 50%; margin-left: -0.247em;"><span class="mi" id="MathJax-Span-39" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.818em 1000.63em 1.256em -999.997em); top: -1.313em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.63em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.068em;"></span></span></span></span><span class="mo" id="MathJax-Span-40" style="font-family: MathJax_Main; padding-left: 0.254em;">+</span><span class="mfrac" id="MathJax-Span-41" style="padding-left: 0.254em;"><span style="display: inline-block; position: relative; width: 0.63em; height: 0px; margin-right: 0.128em; margin-left: 0.128em;"><span style="position: absolute; clip: rect(3.324em 1000.32em 4.201em -999.997em); top: -4.445em; left: 50%; margin-left: -0.185em;"><span class="mn" id="MathJax-Span-42" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.324em 1000.57em 4.201em -999.997em); top: -3.568em; left: 50%; margin-left: -0.247em;"><span class="mi" id="MathJax-Span-43" style="font-size: 70.7%; font-family: MathJax_Math-italic;">R</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.818em 1000.63em 1.256em -999.997em); top: -1.313em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 0.63em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.068em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.133em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.639em; border-left: 0px solid; width: 0px; height: 1.789em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-3">\frac{2}{F_1} = \frac{1}{P} + \frac{1}{R} </script></p>

<p>调整下也就是</p>

<p><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-4-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-44" style="width: 12.221em; display: inline-block;"><span style="display: inline-block; position: relative; width: 10.717em; height: 0px; font-size: 114%;"><span style="position: absolute; clip: rect(1.006em 1010.72em 2.76em -999.997em); top: -2.127em; left: 0em;"><span class="mrow" id="MathJax-Span-45"><span class="msubsup" id="MathJax-Span-46"><span style="display: inline-block; position: relative; width: 1.068em; height: 0px;"><span style="position: absolute; clip: rect(3.136em 1000.75em 4.201em -999.997em); top: -4.007em; left: 0em;"><span class="mi" id="MathJax-Span-47" style="font-family: MathJax_Math-italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.128em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.882em; left: 0.63em;"><span class="mn" id="MathJax-Span-48" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-49" style="font-family: MathJax_Main; padding-left: 0.254em;">=</span><span class="mfrac" id="MathJax-Span-50" style="padding-left: 0.254em;"><span style="display: inline-block; position: relative; width: 1.758em; height: 0px; margin-right: 0.128em; margin-left: 0.128em;"><span style="position: absolute; clip: rect(3.324em 1001.44em 4.201em -999.997em); top: -4.445em; left: 50%; margin-left: -0.686em;"><span class="mrow" id="MathJax-Span-51"><span class="mn" id="MathJax-Span-52" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span class="mi" id="MathJax-Span-53" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-54" style="font-size: 70.7%; font-family: MathJax_Math-italic;">R</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.324em 1001.63em 4.264em -999.997em); top: -3.568em; left: 50%; margin-left: -0.811em;"><span class="mrow" id="MathJax-Span-55"><span class="mi" id="MathJax-Span-56" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mo" id="MathJax-Span-57" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mi" id="MathJax-Span-58" style="font-size: 70.7%; font-family: MathJax_Math-italic;">R</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.818em 1001.76em 1.256em -999.997em); top: -1.313em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 1.758em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.068em;"></span></span></span></span><span class="mo" id="MathJax-Span-59" style="font-family: MathJax_Main; padding-left: 0.254em;">=</span><span class="mfrac" id="MathJax-Span-60" style="padding-left: 0.254em;"><span style="display: inline-block; position: relative; width: 4.828em; height: 0px; margin-right: 0.128em; margin-left: 0.128em;"><span style="position: absolute; clip: rect(3.324em 1001.38em 4.201em -999.997em); top: -4.445em; left: 50%; margin-left: -0.686em;"><span class="mrow" id="MathJax-Span-61"><span class="mn" id="MathJax-Span-62" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span class="mi" id="MathJax-Span-63" style="font-size: 70.7%; font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-64" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.324em 1004.7em 4.264em -999.997em); top: -3.568em; left: 50%; margin-left: -2.378em;"><span class="mrow" id="MathJax-Span-65"><span class="mn" id="MathJax-Span-66" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span class="mi" id="MathJax-Span-67" style="font-size: 70.7%; font-family: MathJax_Math-italic;">T<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-68" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mo" id="MathJax-Span-69" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mi" id="MathJax-Span-70" style="font-size: 70.7%; font-family: MathJax_Math-italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-71" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mo" id="MathJax-Span-72" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mi" id="MathJax-Span-73" style="font-size: 70.7%; font-family: MathJax_Math-italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-74" style="font-size: 70.7%; font-family: MathJax_Math-italic;">N<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.818em 1004.83em 1.256em -999.997em); top: -1.313em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 4.828em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.068em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.133em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.568em; border-left: 0px solid; width: 0px; height: 1.718em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-4">F_1 = \frac{2PR}{P+R} = \frac{2TP}{2TP + FP + FN} </script></p>

<p>例子中 F1-measure 也就是约为 57.143%(<span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-5-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-75" style="width: 3.073em; display: inline-block;"><span style="display: inline-block; position: relative; width: 2.697em; height: 0px; font-size: 114%;"><span style="position: absolute; clip: rect(0.943em 1002.7em 2.697em -999.997em); top: -2.065em; left: 0em;"><span class="mrow" id="MathJax-Span-76"><span class="mfrac" id="MathJax-Span-77"><span style="display: inline-block; position: relative; width: 2.447em; height: 0px; margin-right: 0.128em; margin-left: 0.128em;"><span style="position: absolute; clip: rect(3.324em 1002.26em 4.201em -999.997em); top: -4.445em; left: 50%; margin-left: -1.125em;"><span class="mrow" id="MathJax-Span-78"><span class="mn" id="MathJax-Span-79" style="font-size: 70.7%; font-family: MathJax_Main;">2</span><span class="mo" id="MathJax-Span-80" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span><span class="mn" id="MathJax-Span-81" style="font-size: 70.7%; font-family: MathJax_Main;">0.4</span><span class="mo" id="MathJax-Span-82" style="font-size: 70.7%; font-family: MathJax_Main;">∗</span><span class="mn" id="MathJax-Span-83" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.324em 1001.76em 4.264em -999.997em); top: -3.631em; left: 50%; margin-left: -0.874em;"><span class="mrow" id="MathJax-Span-84"><span class="mn" id="MathJax-Span-85" style="font-size: 70.7%; font-family: MathJax_Main;">0.4</span><span class="mo" id="MathJax-Span-86" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-87" style="font-size: 70.7%; font-family: MathJax_Main;">1</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.818em 1002.45em 1.256em -999.997em); top: -1.313em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 2.447em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.068em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.071em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.568em; border-left: 0px solid; width: 0px; height: 1.718em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-5">\frac{2 <em> 0.4 </em> 1}{0.4 + 1}</script>).</p>

<p>需要说明的是,有人<a href="#ref_2">[2]</a>列了这样个公式<br><span class="MathJax_Preview" style="display: none;"></span><span class="MathJax" id="MathJax-Element-6-Frame" tabindex="0"><nobr><span class="math" id="MathJax-Span-88" style="width: 6.833em; display: inline-block;"><span style="display: inline-block; position: relative; width: 5.956em; height: 0px; font-size: 114%;"><span style="position: absolute; clip: rect(0.755em 1005.96em 2.948em -999.997em); top: -2.127em; left: 0em;"><span class="mrow" id="MathJax-Span-89"><span class="msubsup" id="MathJax-Span-90"><span style="display: inline-block; position: relative; width: 1.068em; height: 0px;"><span style="position: absolute; clip: rect(3.136em 1000.75em 4.201em -999.997em); top: -4.007em; left: 0em;"><span class="mi" id="MathJax-Span-91" style="font-family: MathJax_Math-italic;">F<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.128em;"></span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -3.882em; left: 0.63em;"><span class="mi" id="MathJax-Span-92" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-93" style="font-family: MathJax_Main; padding-left: 0.254em;">=</span><span class="mfrac" id="MathJax-Span-94" style="padding-left: 0.254em;"><span style="display: inline-block; position: relative; width: 3.324em; height: 0px; margin-right: 0.128em; margin-left: 0.128em;"><span style="position: absolute; clip: rect(3.261em 1003.2em 4.389em -999.997em); top: -4.633em; left: 50%; margin-left: -1.626em;"><span class="mrow" id="MathJax-Span-95"><span class="mo" id="MathJax-Span-96" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="msubsup" id="MathJax-Span-97"><span style="display: inline-block; position: relative; width: 0.692em; height: 0px;"><span style="position: absolute; clip: rect(3.512em 1000.38em 4.201em -999.997em); top: -4.007em; left: 0em;"><span class="mi" id="MathJax-Span-98" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.258em; left: 0.379em;"><span class="mn" id="MathJax-Span-99" style="font-size: 50.1%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-100" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mn" id="MathJax-Span-101" style="font-size: 70.7%; font-family: MathJax_Main;">1</span><span class="mo" id="MathJax-Span-102" style="font-size: 70.7%; font-family: MathJax_Main;">)</span><span class="mi" id="MathJax-Span-103" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mi" id="MathJax-Span-104" style="font-size: 70.7%; font-family: MathJax_Math-italic;">R</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(3.261em 1002.76em 4.389em -999.997em); top: -3.568em; left: 50%; margin-left: -1.438em;"><span class="mrow" id="MathJax-Span-105"><span class="msubsup" id="MathJax-Span-106"><span style="display: inline-block; position: relative; width: 0.692em; height: 0px;"><span style="position: absolute; clip: rect(3.512em 1000.38em 4.201em -999.997em); top: -4.007em; left: 0em;"><span class="mi" id="MathJax-Span-107" style="font-size: 70.7%; font-family: MathJax_Math-italic;">a</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; top: -4.195em; left: 0.379em;"><span class="mn" id="MathJax-Span-108" style="font-size: 50.1%; font-family: MathJax_Main;">2</span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span></span></span><span class="mo" id="MathJax-Span-109" style="font-size: 70.7%; font-family: MathJax_Main;">(</span><span class="mi" id="MathJax-Span-110" style="font-size: 70.7%; font-family: MathJax_Math-italic;">P<span style="display: inline-block; overflow: hidden; height: 1px; width: 0.066em;"></span></span><span class="mo" id="MathJax-Span-111" style="font-size: 70.7%; font-family: MathJax_Main;">+</span><span class="mi" id="MathJax-Span-112" style="font-size: 70.7%; font-family: MathJax_Math-italic;">R</span><span class="mo" id="MathJax-Span-113" style="font-size: 70.7%; font-family: MathJax_Main;">)</span></span><span style="display: inline-block; width: 0px; height: 4.013em;"></span></span><span style="position: absolute; clip: rect(0.818em 1003.32em 1.256em -999.997em); top: -1.313em; left: 0em;"><span style="display: inline-block; overflow: hidden; vertical-align: 0em; border-top: 1.3px solid; width: 3.324em; height: 0px;"></span><span style="display: inline-block; width: 0px; height: 1.068em;"></span></span></span></span></span><span style="display: inline-block; width: 0px; height: 2.133em;"></span></span></span><span style="display: inline-block; overflow: hidden; vertical-align: -0.782em; border-left: 0px solid; width: 0px; height: 2.218em;"></span></span></nobr></span><script type="math/tex" id="MathJax-Element-6">F_a = \frac{(a^2 + 1 )PR}{a^2(P+R)}</script><br>将F-measure一般化.</p>

<p>F1-measure认为精确率和召回率的权重是一样的,但有些场景下,我们可能认为精确率会更加重要,调整参数a,使用Fa-measure可以帮助我们更好的evaluate结果.</p>

<p>话虽然很多,其实实现非常轻松,点击<a href="https://github.com/yuikns/argcv/blob/archive-cmake/argcv/ml/aprf.hh" target="_blank">此处</a>可以看到我的一个简单的实现.</p>

<h3>References</h3>

<ul><br><li><a id="ref_1">[1]</a> 李航. 统计学习方法[M]. 北京:清华大学出版社,2012.</li><br><li><a id="ref_2">[2]</a> <a href="http://www.cnblogs.com/bluepoint2009/archive/2012/09/18/precision-recall-f_measures.html" title="准确率（Precision）、召回率（Recall）以及综合评价指标（F1-Measure ）" target="_blank">准确率（Precision）、召回率（Recall）以及综合评价指标（F1-Measure ）</a> </li><br></ul>
</div><div class="tags"></div><div class="post-nav"><a href="/2017/08/08/pandas命令应用/" class="next">pandas命令应用</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = 'bairui82## Your disqus_shortname, e.g. username';
var disqus_identifier = '2017/08/14/accrucy-recall-and-precision/';
var disqus_title = 'accrucy recall and precision';
var disqus_url = 'http://yoursite.com/2017/08/14/accrucy-recall-and-precision/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/next/config.json',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//bairui82## Your disqus_shortname, e.g. username.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/08/14/accrucy-recall-and-precision/">accrucy recall and precision</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/08/pandas命令应用/">pandas命令应用</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/07/brief-summary-of-Bagging-and-boosting/">brief summary of Bagging and boosting</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/07/关于boosting附加文档阅读地址/">关于boosting附加文档阅读地址</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/07/weak-learner/">weak learner</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/06/乱七八糟的博客/">乱七八糟的博客</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/06/Wonderful-Life/">Wonderful Life</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/06/hello-world/">Hello World</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//bairui82## Your disqus_shortname, e.g. username.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Bairui's 技术博客.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>